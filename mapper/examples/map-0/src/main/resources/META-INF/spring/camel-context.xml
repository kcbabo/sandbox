<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:camel="http://camel.apache.org/schema/spring"
   xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

   <!-- Dozer configuration -->
   <bean id="dozerConverterLoader" class="org.apache.camel.converter.dozer.DozerTypeConverterLoader" />
   <bean id="mapper" class="org.dozer.DozerBeanMapper">
      <property name="mappingFiles">
         <list>
            <value>dozerOrderMapping.xml</value>
         </list>
      </property>
   </bean>

   <!-- Camel route -->
   <camel:camelContext xmlns="http://camel.apache.org/schema/spring">
      <camel:dataFormats>
         <camel:json id="json" library="Jackson"/>
      </camel:dataFormats>

      <camel:route>
         <camel:from uri="file:src/data?fileName=abc-order.xml&amp;noop=true" />
         <camel:unmarshal>
            <camel:castor mappingFile="castor-abc-order.xml" />
         </camel:unmarshal>
         <camel:convertBodyTo type="org.example.order.xyz.XYZOrder" />
         <camel:marshal ref="json" />
         <to uri="file:target/messages?fileName=abc-order.json"/>
      </camel:route>
   </camel:camelContext>

</beans>
